# 送信コマンド仕様

Firmware Version 2.3について記述

通信速度は115200bps 改行文字はCRLFが規定  
ターミナルソフトやAD7SGPR シリアル通信Webアプリより送信してください。

# 目次

- [送信コマンド仕様](#送信コマンド仕様)
- [目次](#目次)
- [送信コマンド一覧](#送信コマンド一覧)
- [詳細仕様](#詳細仕様)
  - [英数字・記号(ASCII)](#英数字記号ascii)
  - [@HEX](#hex)
  - [@CLR](#clr)
  - [@ANI](#ani)
  - [@7SG](#7sg)
  - [@BRI](#BRI)
  - [@BRR](#BRR)
 - [エラーコード一覧](#エラーコード一覧)

<br><br>

# 送信コマンド一覧
コマンドを送信する際は余計なスペースなどを含めないでください。  
連続でデータを送信する場合は改行ごとに最低1ms以上の間隔を空けてください。  
確実に行うのであればAD7SGPRからのアンサーバックを確認してからの送信をおすすめします。

| コード | 機能 |
| --- | --- |
| [英数字・記号(ASCII)](#英数字記号ascii) | 受信した英数字・記号を7セグディスプレイに表示します。(最大8桁まで、「.」は1つまで)   |
| [@HEX[??*8桁]](#hex)     | 16進数のデータでセグメントを個別に制御します。 |
| [@CLR](#clr)                | ディスプレイをクリアします。                                                                    |
| [@ANI[数字0-2]](#ani)     | ディスプレイのトランジションを設定します。<br>@ANI0 アニメなし<br>@ANI1 数字によるスロット風<br>@ANI2 セグメントの回転 |
| [@7SG[数字0,1]](#7sg)       | ディスプレイの表示モードを設定します。<br>@7SG0 ディスプレイ消灯<br>@7SG1 ディスプレイ点灯<br>7セグの表示はされないだけでAD7SGPRから応答は返ってきます |
| [@BRI[数字0-7]](#bri)       | ディスプレイの輝度を設定します。@BRI の後に 0 から 7 の数字をつけて輝度を設定します。例：@BRI5     |
| [@BRR](#brr)               | 現在のディスプレイの輝度を返します。                                                            |


---
<br><br>

# 詳細仕様
以下送信コード文末の改行は表示を省略しています。  

## 英数字・記号(ASCII)
[送信コマンド一覧へ戻る](#送信コマンド一覧)  
AD7SGPRに送信した文字列を7セグメントディスプレイに表示する  
(8桁まで、小数点は1つまで)  

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --: | --- |
| 123 | rxData:123| 123 |数字表示|
| abc | rxData:abc | abc |英字表示(一部英字・記号は不完全な状態で描画されます)|
| bto2023 | rxData:bto2023 | bto2023 |英数混合表示|
| 123456789 | rxData:123456789 | 23456789 |表示は8桁まで|
| 12.3 | rxData:12.3 | 12.3 |小数点は1つまで表示可能|
|||||
| 8.8.8.8.| rxData:8.8.8.8.<br>E1: Multiple dots | 23456789.0 | エラーコード:小数点は1つまで |

---

## @HEX
[送信コマンド一覧へ戻る](#送信コマンド一覧)  
セグメントの個別点灯の制御
字では表せないようなセグメントの点灯をサポート

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --: | --- |
| @HEXFFFFFFFFFFFFFFFF | rxData:@HEXFFFFFFFFFFFFFFFF | 8.8.8.8.8.8.8.8. |  |
| @HEX0000000000000080 |rxData:@HEX0000000000000080 |       .| |
| @HEXFF00000000000000| rxData:@HEXFF00000000000000 | 8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;||
|||||
|@HEX|rxData:@HEX<br>E3: Need 16 hex digits||エラーコード：@HEXのあとに続く文字が16桁ではない|

### @HEXコマンドの個別制御について解説
16桁の16進数でセグメントの点灯を制御します。  
2文字づつが各桁のセグメントへの指示となっており、特殊な点灯が可能です。

[こちら](HexadecimalTableFor@HEX.md)にセグメントの点灯を制御するための16進数と点灯内容を表にまとめました。

---

## @CLR
[送信コマンド一覧へ戻る](#送信コマンド一覧)  
７セグメントディスプレイに表示された内容を消去する

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --- | --- |
|@CLR|rxData:@CLR Display clear|(消去)||


---

## @ANI
[送信コマンド一覧へ戻る](#送信コマンド一覧)  

トランジション（表示遷移時のアニメーション）の設定  

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --: | --- |
|@ANI0|rxData:@ANI0<br>No animation||トランジションをなしに設定(デフォルト)|
|@ANI1|rxData:@ANI1<br>Animation1||トランジションをパターン1に設定(数字によるスロット風)|
|@ANI2|rxData:@ANI2<br>Animation2||トランジションをパターン2に設定(セグメントの回転)|
|||||
|@ANI3|rxData:@ANIx<br>No animation||数字が範囲外の場合でもアニメーションをなしに設定します|


---

## @7SG
[送信コマンド一覧へ戻る](#送信コマンド一覧)  

7セグメントディスプレイの表示モードを設定する。
電源を入れたまま7セグメントディスプレイの表示・非表示を切り替えることが可能です。

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --- | --- |
| @7SG0 | rxData:@7SG0<br>7sgOff | (裏面LED弱く点灯) | 7セグ非点灯モード | 
| @7SG1 | rxData:@7SG1<br>7sgOn | (裏面LED強く点灯) | 7セグ点灯モード  |
|||||
| @7SG2 | rxData:@7SGx<br>7sgOn | (裏面LED強く点灯) | @7SG0以外の指示であれば点灯モードに入ります。|


---

## @BRI
[送信コマンド一覧へ戻る](#送信コマンド一覧)  

7セグメントディスプレイの輝度を設定する。

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --- | --- |
| @BRI0 | rxData:@BRI0<br>brightness: 0 | (輝度0) | |
| @BRI1 | rxData:@BRI1<br>brightness: 1 | (輝度1) | |
| @BRI2 | rxData:@BRI2<br>brightness: 2 | (輝度2) | |
| @BRI3 | rxData:@BRI3<br>brightness: 3 | (輝度3) | |
| @BRI4 | rxData:@BRI4<br>Brightness: 4 | (輝度4) | |
| @BRI5 | rxData:@BRI5<br>Brightness: 5 | (輝度5) | |
| @BRI6 | rxData:@BRI6<br>Brightness: 6 | (輝度6) | |
| @BRI7 | rxData:@BRI7<br>Brightness: 7 | (輝度7) | |
|||||
| @BRI8 | rxData:@BRIx<br>E4: Brightness out of range || エラーコード:輝度が0-7で指定されていない|




---

## @BRR
[送信コマンド一覧へ戻る](#送信コマンド一覧)   

現在の7セグメントディスプレイの輝度を返します。

| 送信コード | AD7SGPR返信コード| AD7SGPR7セグ表示 | 概要 |
| --- | --- | --: | --- |
| @BRR |rxData:@BRR<br>brightness: ?|| ?は現在の輝度 |

---

# エラーコード一覧

| エラーコード | エラー内容                                                        |
| ------------ | ----------------------------------------------------------------- |
| E0           | Over receive length<br>受信文字は20文字未満にしてください         |
| E1           | Multiple dots<br>ピリオドを1個以上存在させないでください           |
| E3           | Need 16 hex digits<br>16桁の16進数が必要                          |
| E4           | Brightness out of range<br>輝度が範囲外                           |
